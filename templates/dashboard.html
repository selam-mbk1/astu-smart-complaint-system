{% extends 'base.html' %}

{% block content %}

<h1 class="text-2xl mb-4">Admin Dashboard</h1>

<p>Total Complaints: {{ total }}</p>
<p>Resolved: {{ resolved }}</p>

<canvas id="chart"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>

let data = {
labels: [
{% for c in categories %}
"{{ c.category__name }}",
{% endfor %}
],
datasets: [{
data: [
{% for c in categories %}
{{ c.count }},
{% endfor %}
]
}]
};

new Chart(document.getElementById('chart'), {
type: 'pie',
data: data
});

</script>

{% endblock %}
